full contents of components/ComplexMode.tsx